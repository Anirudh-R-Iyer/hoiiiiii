:root{
  --bg:#0b0b1a;
  --accent:#ff5c8a;
  --paper:#f9f4e6;
  --scroll-border:#b89b66;
}
html,body{height:100%;margin:0;font-family:'Press Start 2P', monospace;background:var(--bg);color:#fff;}
body { -webkit-font-smoothing: none; image-rendering: pixelated; text-rendering: geometricPrecision; }

.scene{
  position:relative;
  min-height:100vh;
  overflow:hidden;
  background: linear-gradient(180deg, rgba(10,8,30,1) 0%, rgba(7,6,18,1) 70%);
  display:flex;
  align-items:center;
  justify-content:center;
}

.starfield{
  position:absolute; inset:0; pointer-events:none;
  background-image:
    radial-gradient(circle at 10% 20%, #fff 0.5px, transparent 1px),
    radial-gradient(circle at 30% 10%, #fff 0.6px, transparent 1px),
    radial-gradient(circle at 70% 30%, #fff 0.4px, transparent 1px),
    radial-gradient(circle at 85% 15%, #fff 0.5px, transparent 1px),
    radial-gradient(circle at 60% 60%, #fff 0.4px, transparent 1px),
    radial-gradient(circle at 20% 80%, #fff 0.5px, transparent 1px),
    radial-gradient(circle at 40% 50%, #fff 0.4px, transparent 1px);
  animation: twinkle 3s infinite linear;
  opacity:0.95;
  mix-blend-mode:screen;
}
@keyframes twinkle{
  0%{filter:brightness(1) saturate(1)}
  50%{filter:brightness(1.6) saturate(1.2)}
  100%{filter:brightness(1)}
}

.moon{
  position:absolute;
  right:8%;
  top:6%;
  width:120px;height:120px;
  border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #fff 18%, #e7e7e7 35%, #bfbfbf 100%);
  box-shadow:0 0 30px rgba(255,255,255,0.08);
  transform:translateZ(0);
}
.moon::after{
  content:"";
  position:absolute; left:60%; top:30%; width:28px; height:28px; background:rgba(0,0,0,0.12); border-radius:50%;
}

.garden{
  position:absolute; bottom:6%; left:50%; transform:translateX(-50%); display:flex; gap:18px; align-items:flex-end;
  z-index:2;
}
.rose{
  width:60px; height:80px; transform-origin:center bottom; image-rendering:pixelated;
  filter: drop-shadow(0 4px 0 rgba(0,0,0,0.6));
  transition:transform .4s steps(1);
}
.rose svg { width:100%; height:100%; display:block; image-rendering:pixelated; }
.rose.bloom { animation: bloom 1s forwards steps(6); }
@keyframes bloom{
  0%{transform:translateY(20px) scale(.4) rotate(-6deg)}
  60%{transform:translateY(-6px) scale(1.06) rotate(4deg)}
  100%{transform:translateY(0) scale(1) rotate(0)}
}

.center-content { z-index:5; text-align:center; padding:12px; pointer-events:none;}
.title { font-size:18px; color:var(--accent); margin-bottom:12px; text-shadow:0 2px 0 rgba(0,0,0,0.6); pointer-events:auto; }
.sub { font-size:10px; color:#ddd; }

.modal {
  position:fixed;
  left:50%; top:50%;
  transform:translate(-50%,-50%);
  background:rgba(255,255,255,0.06);
  border:4px solid rgba(255,255,255,0.06);
  padding:20px 24px;
  border-radius:10px;
  backdrop-filter: blur(6px);
  z-index:20;
  min-width:280px;
  max-width:92%;
  pointer-events:auto;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}
.modal .question {
  font-size:14px; color:#fff; margin-bottom:16px;
}
.modal .buttons { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
button.pixel {
  font-family:inherit; font-size:12px; padding:10px 14px; border-radius:6px; border:3px solid #fff3;
  background:linear-gradient(180deg, rgba(255,255,255,0.08), rgba(0,0,0,0.06));
  color:#fff; cursor:pointer; outline:none;
  position:relative;
  transition:transform .08s steps(1);
}
button.pixel:active{ transform:translateY(2px); }
.hint { font-size:9px; color:#ddd; opacity:0.9; margin-top:10px; }

.scroll-wrap{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.8));
  z-index:40; padding:24px; gap:20px; flex-direction:column;
  visibility:hidden; opacity:0; transition:opacity .5s ease;
}
.scroll-wrap.show{ visibility:visible; opacity:1; pointer-events:auto; }

.scroll {
  width:min(880px,95%); max-height:80vh; overflow:auto;
  background: linear-gradient(180deg, #fbf4dc, #f3ecd9 40%, #efe3c9 100%);
  border:12px solid var(--scroll-border); border-radius:10px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  padding:32px 30px; position:relative;
  font-size:12px; color:#222; line-height:1.6;
}

/* Embedded pixel-art knight+frog watermark (SVG data URI) */
.scroll::before{
  content:"";
  position:absolute; inset:0; 
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 120'><rect width='100%' height='100%' fill='none'/><g opacity='0.08' fill='%23bfb294'><!-- knight (left) pixel style --><rect x='10' y='20' width='10' height='10' /><rect x='20' y='20' width='10' height='10' /><rect x='12' y='30' width='10' height='10' /><rect x='18' y='10' width='8' height='6' /><rect x='10' y='38' width='30' height='6' rx='1' /><!-- frog (right) pixel style --><rect x='140' y='48' width='8' height='6' /><rect x='148' y='44' width='8' height='8' /><rect x='156' y='52' width='8' height='6' /><rect x='144' y='40' width='4' height='4' /><rect x='164' y='40' width='4' height='4' /></g></svg>");
  background-repeat:no-repeat; background-position:center; background-size:55%;
  mix-blend-mode:multiply; pointer-events:none;
}

.typewriter { font-family:'Press Start 2P', monospace; white-space:pre-wrap; white-space:break-spaces; font-size:12px; color:#111; }

.controls { position:fixed; left:12px; bottom:12px; z-index:60; display:flex; gap:8px; align-items:center; }
.controls button { font-family:inherit; padding:8px 10px; border-radius:6px; border:2px solid #fff2; background:rgba(255,255,255,0.03); color:#fff; cursor:pointer; }

@media (max-width:520px){
  .moon{ width:80px;height:80px; right:6%; top:6%;}
  .rose{ width:44px; height:62px;}
  .title { font-size:12px }
  .modal { min-width:240px; padding:16px; }
  .scroll { padding:20px; font-size:11px; }
}
